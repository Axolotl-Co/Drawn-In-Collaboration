"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.get = void 0;
const get = ({ t, services }) => (r) => {
    const Request = t.Object(t.prop('id', t.Ref('BlockId')).options({
        title: 'Block ID',
        description: 'The ID of the block to retrieve.',
    }));
    const Response = t.Object(t.prop('block', t.Ref('Block').options({})), t.prop('patches', t.Array(t.Ref('BlockPatch'))).options({
        title: 'Patches',
        description: 'The list of all patches.',
    }));
    const Func = t.Function(Request, Response).options({
        title: 'Read Block',
        intro: 'Retrieves a block by ID.',
        description: 'Fetches a block by ID.',
    });
    return r.prop('blocks.get', Func, async ({ id }) => {
        const { block, patches } = await services.blocks.get(id);
        return {
            block,
            patches,
        };
    });
};
exports.get = get;
